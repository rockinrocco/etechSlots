"use strict";var app=angular.module("etechSlotApp",["ngAnimate","ngCookies","ngResource","ngRoute","ngSanitize","ngAudio","ngTouch","ngMaterial","ngCookies"]);app.run(["$rootScope",function(a){a.spinsSinceLastWin=0,a.currentPrize=0,a.reel1=0,a.reel2=1,a.reel3=2}]).config(["$routeProvider",function(a){a.when("/slotMachine",{templateUrl:"views/main.html",controller:"slotMachineController",controllerAs:"slotMachineCtrl"}).when("/about",{templateUrl:"views/about.html",controller:"AboutCtrl",controllerAs:"about"}).otherwise({redirectTo:"/"})}]),angular.module("etechSlotApp").controller("slotMachineController",["$scope","ngAudio","$cookies",function(a,b,c){a.spin=b.load("sounds/spinning.mp3"),a.fastPayout=b.load("sounds/fastpayout.mp3"),a.payout=b.load("sounds/payout.mp3"),a.list=c.get("nameList"),this.getInformation=!0,this.showSlot=!1;var d=this;d.machineName="Etech Slots",d.minBet=1,d.maxBet=1,d.credits=3,d.dayWinnings=0,d.lifetimeWinnings=500,d.name="",d.email="",d.numIconsPerReel=3,d.windowID=1,d.showBackButton=!1,this.prizes=[];var e={id:1,payout_winnings:"Yeti Items",image1:{image_name:"prize_1"},image2:{image_name:"prize_1"},image3:{image_name:"prize_1"}},f={id:2,payout_winnings:"Etech Jar",image1:{image_name:"prize_2"},image2:{image_name:"prize_2"},image3:{image_name:"prize_2"}},g={id:0,payout_winnings:"Wine Stopper",image1:{image_name:"prize_3"},image2:{image_name:"prize_3"},image3:{image_name:"prize_3"}};this.prizes.push(e),this.prizes.push(f),this.prizes.push(g),console.log(this.prizes),this.playSlots=function(){if(""!=d.name&&""!=d.email){d.showSlot=!0,d.getInformation=!1;var a=c.get("nameList");null==a&&(a=[]),a=a+"|| Name: "+d.name+" Email: "+d.email,c.put("nameList",a),d.credits=3}},this.goBack=function(){d.showBackButton=!1,$("#spinButton").removeClass("hidden"),d.name="",d.email="",d.getInformation=!0,d.showSlot=!1};var h={stripHeight:720,alignmentOffset:86,firstReelStopTime:667,secondReelStopTime:575,thirdReelStopTime:568,payoutStopTime:700,reelSpeedDifference:1,reelSpeed1Delta:30,reelSpeed1Time:0,reelSpeed2Delta:40,positioningTime:200,bounceHeight:200,bounceTime:1e3,winningsFormatPrefix:"",spinURL:"/slots/spin.php",curBet:d.minBet,soundEnabled:!0,spinning:!1,init:function(){$("#betSpinUp").click(function(){h.change_bet(1)}),$("#betSpinDown").click(function(){h.change_bet(-1)}),$("#spinButton").click(function(){h.spin()}),$("#soundOffButton").click(function(){h.toggle_sound()}),h.get_balance()<d.minBet&&h.disable_spin_button()},get_balance:function(){return d.credits+1},toggle_sound:function(){$("#soundOffButton").hasClass("off")?b.unmute():b.mute(),$("#soundOffButton").toggleClass("off")},enable_spin_button:function(){$("#spinButton").removeClass("disabled")},disable_spin_button:function(){$("#spinButton").addClass("disabled")},spin:function(){if($("#spinButton").hasClass("disabled"))return!1;if(h.spinning)return!1;d.credits--,0==d.credits&&($("#spinButton").addClass("hidden"),d.showBackButton=!0),h.spinning=!0,h.show_won_state(!1),h.disable_spin_button(),h._start_reel_spin(1,0),h._start_reel_spin(2,h.secondReelStopTime),h._start_reel_spin(3,h.secondReelStopTime+h.thirdReelStopTime),a.spin.play();var b=function(){var b={};b.success=!0,console.log(a.spinsSinceLastWin),11==a.spinsSinceLastWin?(a.spinsSinceLastWin=0,b.prize={},b.prize.id=a.currentPrize,b.reels=[a.currentPrize,a.currentPrize,a.currentPrize],b.prize.winType=!0,a.spinsSinceLastWin=0,a.currentPrize=(a.currentPrize+1)%3):(b.reels=[a.reel1,a.reel2,a.reel3],a.reel1=(a.reel1+1)%3,a.reel2=(a.reel2+1)%3,a.reel3=(a.reel3+1)%3,b.success=!0),a.spinsSinceLastWin++;var c=1e3;window.setTimeout(function(){h._stop_reel_spin(1,b.reels[0])},c),c+=h.secondReelStopTime,window.setTimeout(function(){h._stop_reel_spin(2,b.reels[1])},c),c+=h.thirdReelStopTime,window.setTimeout(function(){h._stop_reel_spin(3,b.reels[2])},c),c+=h.payoutStopTime,window.setTimeout(function(){h.end_spin(b)},c)};b()},show_won_state:function(a,b,c){a?(c?$("#PageContainer, #SlotsOuterContainer").addClass(c):$("#PageContainer, #SlotsOuterContainer").addClass("won"),$("#trPrize_"+b).addClass("won")):($(".trPrize").removeClass("won"),$("#PageContainer, #SlotsOuterContainer").removeClass(),$("#lastWin").html(""))},end_spin:function(b){null!=b.prize&&(a.fastPayout.play(),h.show_won_state(!0,b.prize.id,b.prize.winType)),h._end_spin_after_payout(b)},_format_winnings_number:function(a){return a==Math.floor(a)?a:a.toFixed(2)},_end_spin_after_payout:function(a){h.spinning=!1,h.enable_spin_button()},abort_spin_abruptly:function(){h._stop_reel_spin(1,null),h._stop_reel_spin(2,null),h._stop_reel_spin(3,null)},_start_reel_spin:function(a,b){var c=Date.now(),d=$("#reel"+a);d.css({top:-(Math.random()*h.stripHeight*2)});var e=parseInt(d.css("top"),10),f=function(){d.css({top:e}),e+=Date.now()<c+h.reelSpeed1Time+b?h.reelSpeed1Delta:h.reelSpeed2Delta,e+=a*h.reelSpeedDifference,e>0&&(e=2*-h.stripHeight)},g=window.setInterval(f,20);d.data("spinTimer",g)},_stop_reel_spin:function(a,b){var c=$("#reel"+a),d=c.data("spinTimer");if(window.clearInterval(d),c.data("spinTimer",null),null!=b){var e=h.stripHeight/3,f=-h.stripHeight-(b-1)*e+h.alignmentOffset;c.css({top:f-h.stripHeight}).animate({top:f+h.bounceHeight},h.positioningTime,"linear",function(){c.animate({top:f},h.bounceTime,"easeOutElastic")})}}};h.init()}]),angular.module("etechSlotApp").controller("MainCtrl",function(){this.awesomeThings=["HTML5 Boilerplate","AngularJS","Karma"]}),angular.module("etechSlotApp").controller("AboutCtrl",["$scope","ngAudio","$cookies",function(a,b,c){a.lists=c.get("nameList").split("||")}]),angular.module("etechSlotApp").run(["$templateCache",function(a){a.put("views/about.html",'<style>.list{\n	background-color: white;\n	font-size:12px;\n	padding-left:20px;\n	padding-right:20px;\n	padding-top:10px;\n	width:60%;\n	margin:auto;\n	text-align: center\n}</style> <div class="list" ng-repeat="list in lists track by $index" dynamic="lists"> {{lists[$index]}} </div>'),a.put("views/main.html",'<script type="text/javascript" src="js/jquery-1.7.1.min.js"></script> <script type="text/javascript" src="js/jquery-ui-1.8.17.custom.min.js"></script> <script type="text/javascript" src="js/slots.js"></script> <style>.infoBox{\n  width:50%;\n  min-width:600px;\n  height:425px;\n  border-radius:5px;\n  top:50px;\n  box-shadow: 0px 1px 1px 0.3px;\n  border:1px solid rgba(0,0,0,0.1);\n  padding:10px;\n  background-color:white;\n  margin-left:auto;\n  margin-right:auto;\n  text-align: center;\n}\n\n.parent{\n  padding-top:80px;\n}\n\n.image {\n  margin:auto;\n  width:200px;;\n  height:110px;\n}\n.image img{\n  height:100px;\n  width:200px;;\n}\n.imgWrapper{\n  width:100%;\n  border-bottom:1px solid rgba(0,0,0,0.1);\n}\n\n.btn-success{\n  margin: auto;\n  height:50px;\n  width:30% !important;\n  font-size:18px;\n  background-color: rgb(4, 106, 58);\n}</style> <div class="parent"> <div ng-show="slotMachineCtrl.getInformation" class="infoBox"> <div class="imgWrapper"> <div class="image"> <img src="../images/slot1.fde08531.png"> </div> </div> <md-content class="md-no-momentum" style="padding-right:15%;padding-left:15%"> <p style="text-align:center; margin-top:10px; font-size:16px; font-weight:600">Enter your information to play</p> <md-input-container class="md-icon-float md-block"> <!-- Use floating label instead of placeholder --> <label>Name</label> <md-icon md-svg-src="img/icons/ic_person_24px.svg" class="name"></md-icon> <input ng-model="slotMachineCtrl.name" type="text"> </md-input-container> <md-input-container class="md-block"> <!-- Use floating placeholder instead of label --> <md-icon md-svg-src="img/icons/ic_email_24px.svg" class="email"></md-icon> <input ng-model="slotMachineCtrl.email" type="text" placeholder="Email"> </md-input-container> <md-input-container md-no-float class="md-block"> <button type="button" class="btn btn-success" ng-click="slotMachineCtrl.playSlots()">Play!</button> </md-input-container></md-content> </div> </div> <div ng-show="slotMachineCtrl.showSlot" id="PageContainer"> <div id="PageContainerInner"> <!-- Just to be able to set the "won!" extra background --> <div id="prizes_list"> <div ng-repeat="prize in slotMachineCtrl.prizes"> <div id="trPrize_{{prize[\'id\']}}" class="trPrize"> <div class="tdReels"> <div class="reel1 reelIcon {{prize[\'image1\'][\'image_name\']}}"></div> <div class="reel2 reelIcon {{prize[\'image2\'][\'image_name\']}}"></div> <div class="reel3 reelIcon {{prize[\'image3\'][\'image_name\']}}"></div> <div class="clearer"></div> </div> <span class="tdPayout" data-basepayout="{{prize[\'payout_winnings\']}}">{{prize[\'payout_winnings\']}}</span> <div class="clearer"></div> </div> </div> </div> <div id="slotMachineContainer"> <div id="ReelContainer"> <div id="reel1" class="reel"></div> <div id="reel2" class="reel"></div> <div id="reel3" class="reel"></div> <div id="reelOverlay"></div> </div> <div id="betContainer"> <span id="lastWin"></span> <span id="credits">{{slotMachineCtrl.credits}}</span> <span id="dayWinnings">{{slotMachineCtrl.dayWinnings}}</span> <span id="lifetimeWinnings">{{slotMachineCtrl.lifetimeWinnings}}</span> </div> <div id="spinButton"></div> <button type="button" class="btn btn-danger" ng-show="slotMachineCtrl.showBackButton" style="top: 115%;width: 100%;position: absolute; height: 50px" ng-click="slotMachineCtrl.goBack()">Back</button> </div> <script type="text/javascript"></script> </div> </div>')}]);